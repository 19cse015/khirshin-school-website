<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta name="robots" content="index, follow">

  <title>Class Routine | পাঠ্যক্রমের সময়সূচি | Khirshin S.K High School</title>
  <meta name="description"
    content="Check the detailed class routine (পাঠ্যক্রমের সময়সূচি) of Khirshin S.K High School for each grade and subject. Stay updated with your daily schedule.">
  <link rel="stylesheet" href="/public/update.css">
  <link rel="stylesheet" href="/CSS/footer.css">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css"
    crossorigin="anonymous" />

  <style>
    body {
      font-family: "Poppins", sans-serif;
      background: #f5f8ff;
      margin: 0;
      padding: 0;
    }

    .container {
      max-width: 1000px;
      margin: 40px auto;
      background: white;
      padding: 25px;
      border-radius: 12px;
      box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
    }

    h2 {
      text-align: center;
      color: #007bff;
      margin-bottom: 20px;
    }

    .tabs {
      display: flex;
      justify-content: center;
      flex-wrap: wrap;
      gap: 10px;
      margin-bottom: 25px;
    }

    .tab-btn {
      background: #e3f2fd;
      border: none;
      padding: 10px 18px;
      border-radius: 8px;
      font-weight: 600;
      cursor: pointer;
      transition: 0.3s;
    }

    .tab-btn:hover {
      background: #bbdefb;
    }

    .tab-btn.active {
      background: #007bff;
      color: white;
    }

    .table-wrapper {
      overflow-x: auto;
    }

    table {
      width: 100%;
      border-collapse: collapse;
      text-align: center;
    }

    th,
    td {
      border: 1px solid #ddd;
      padding: 8px;
      font-size: 14px;
    }

    th {
      background-color: #007bff;
      color: white;
    }

    tr:nth-child(even) {
      background: #f9f9f9;
    }

    .card {
      border-radius: 10px;
      padding: 15px;
      background: #fff;
      box-shadow: 0 3px 10px rgba(0, 0, 0, 0.1);
    }

    .loading,
    .no-data,
    .error {
      text-align: center;
      color: #555;
      font-size: 16px;
      margin-top: 30px;
    }

    @media (max-width: 768px) {

      th,
      td {
        font-size: 12px;
        padding: 6px;
      }

      .tab-btn {
        font-size: 14px;
        padding: 8px 14px;
      }
    }
  </style>
</head>

<body>
  <div class="top-bar">
    <span>Education</span>
    <span>Discipline</span>
    <span>Character</span>
  </div>

  <header class="school-header">
    <div class="logo">
      <img src="/images/logo-final.jpg" alt="School Logo">
    </div>

    <div class="school-info">
      <h1>KHIRSHIN S.K HIGH SCHOOL</h1>
      <p>Patnitala, Naogaon, Bangladesh</p>
      <p>Established: 1943 | School Code: 1234 | EIIN: 123571</p>
    </div>

    <div class="header-btn">

      <button class="btn-login" onclick="window.location.href='/ADMIN/login.html'">Login</button>
    </div>
  </header>
  <!-- Navbar -->
  <nav class="navbar">

    <ul class="menu">
      <li><a href="index.html">Home</a></li>
      <li class="dropdown">
        <a href="#">About Us ▾</a>
        <ul class="dropdown-content">
          <li><a href="principal-message.html">Principal's Message</a></li>
          <li><a href="history_of_school.html">History of Our School</a></li>
          <li><a href="Teacher_list.html">Teacher List</a></li>
        </ul>
      </li>
      <li class="dropdown">
        <a href="#">Notice Board ▾</a>
        <ul class="dropdown-content">
          <li><a href="exam_notice.html">Exam Notice</a></li>
          <li><a href="academic_notice.html">Academic Notice</a></li>
          <li><a href="Admission-notice.html">Admission Notice</a></li>
          <li><a href="Event_notice.html">Event Notice</a></li>
          <li><a href="Result.html">Result</a></li>
        </ul>
      </li>
      <li class="dropdown">
        <a href="#">Student Affairs ▾</a>
        <ul class="dropdown-content">
          <li><a href="school-uniform.html">School Uniform</a></li>
          <li><a href="class-routine.html">School Timing</a></li>
          <li><a href="photo-galarry.html">Photo Gallery</a></li>
          <li><a href="#">Awards</a></li>
        </ul>
      </li>
    </ul>
  </nav>

  <!-- Routine Container -->
  <div class="container">
    <h2>Class Routine Viewer</h2>

    <div class="tabs">
      <button class="tab-btn active" data-class="6">Class 6</button>
      <button class="tab-btn" data-class="7">Class 7</button>
      <button class="tab-btn" data-class="8">Class 8</button>
      <button class="tab-btn" data-class="9">Class 9</button>
      <button class="tab-btn" data-class="10">Class 10</button>
    </div>

    <div id="routineContainer" class="routine-container">
      <p class="loading">Select a class to view its routine</p>
    </div>
  </div>

  <!-- Footer -->
  <footer>
    <div class="row">
      <!-- Contact -->
      <div class="col">
        <h3>Contact Us</h3>
        <ul class="contact-info">
          <li><i class="fas fa-envelope"></i><span>khirshin1943@gmail.com</span></li>
          <li><i class="fas fa-phone-alt"></i><span>+880 1741-069502</span></li>
          <li>
            <i class="fas fa-globe"></i>
            <a href="https://www.kskhs.edu.bd" target="_blank">Official Website: www.kskhs.edu.bd</a>
          </li>

          <li><i class="fas fa-map-marker-alt"></i><span>Khirshin, Patnitala, Naogaon, Bangladesh</span></li>
        </ul>
      </div>


      <!-- Quick Links -->
      <div class="col footer-icons">
        <h3>Quick Links</h3>
        <ul>
          <li><a href="index.html"><i class="fa-solid fa-house"></i> Home</a></li>
          <li><a href="principal-message.html"><i class="fa-solid fa-user-tie"></i> Principal's Message</a></li>
          <li><a href="history_of_school.html"><i class="fa-solid fa-school"></i> About Our School</a></li>
          <li><a href="Teacher_list.html"><i class="fa-solid fa-chalkboard-teacher"></i> Teacher List</a></li>
          <li><a href="class-routine.html"><i class="fa-solid fa-clock"></i> Class Routine</a></li>
          <li><a href="exam_notice.html"><i class="fa-solid fa-file-alt"></i> Exam Notice</a></li>
          <li><a href="Admission-notice.html"><i class="fa-solid fa-file-import"></i> Admission Notice</a></li>
          <li><a href="photo-galarry.html"><i class="fa-solid fa-images"></i> Photo Gallery</a></li>
          <li><a href="contact.html"><i class="fa-solid fa-phone"></i> Contact Us</a></li>
        </ul>
      </div>


      <!-- Social Media -->

      <div class="col follow-us">
        <h3>Follow Us</h3>
        <div class="social-icons">
          <a href="#" class="social-icon facebook">
            <i class="fab fa-facebook-f"></i>
            <span>Facebook</span>
          </a>
          <a href="#" class="social-icon twitter">
            <i class="fab fa-twitter"></i>
            <span>Twitter</span>
          </a>
          <a href="#" class="social-icon linkedin">
            <i class="fab fa-linkedin-in"></i>
            <span>LinkedIn</span>
          </a>
          <a href="#" class="social-icon youtube">
            <i class="fab fa-youtube"></i>
            <span>YouTube</span>
          </a>
        </div>
      </div>



      <!-- About -->
      <div class="col">
        <h3>About Us</h3>
        <ul>
          <li><a href="">Khirshin S.K High School, established in 1943, is a renowned educational institution in
              Patnitala, Naogaon.
              We are dedicated to providing quality education that builds knowledge, discipline, and character in every
              student.

            </a></li>
        </ul>

      </div>
    </div>

    <hr>

    <p>&copy;<span id="year"></span> All Rights Reserved By Md.Arif Hossain</p>
    <script src="/public/year.js"></script>
  </footer>


  <script>
    const buttons = document.querySelectorAll(".tab-btn");
    const container = document.getElementById("routineContainer");

    // ✅ Helper function: convert 24-hour to 12-hour format
    function formatTime24to12(time24) {
      if (!time24) return "";
      let [hour, minute] = time24.split(":");
      hour = parseInt(hour);
      const ampm = hour >= 12 ? "PM" : "AM";
      hour = hour % 12 || 12;
      return `${hour}:${minute} ${ampm}`;
    }

    buttons.forEach(btn => {
      btn.addEventListener("click", async () => {
        buttons.forEach(b => b.classList.remove("active"));
        btn.classList.add("active");
        const className = btn.dataset.class;

        container.innerHTML = `<p class="loading">Loading routine for Class ${className}...</p>`;

        try {
          const response = await fetch(`/api/routine/class/${className}`);
          const data = await response.json();

          if (!response.ok || !data || !data.rows) {
            container.innerHTML = `<p class="no-data">No routine found for Class ${className}</p>`;
            return;
          }

          const rows = data.rows.map(row => {
            const [start, end] = row.time.split(" - ");
            const formattedTime = `${formatTime24to12(start)} - ${formatTime24to12(end)}`;
            return `
              <tr>
                <td>${formattedTime}</td>
                ${row.subjects.map(sub => `<td>${sub || '-'}</td>`).join('')}
              </tr>
            `;
          }).join('');

          container.innerHTML = `
            <div class="card">
              <h3>Class ${data.class}</h3>
              <div class="table-wrapper">
                <table>
                  <thead>
                    <tr>
                      <th>Time</th>
                      <th>Sunday</th>
                      <th>Monday</th>
                      <th>Tuesday</th>
                      <th>Wednesday</th>
                      <th>Thursday</th>
                    </tr>
                  </thead>
                  <tbody>${rows}</tbody>
                </table>
              </div>
            </div>
          `;
        } catch (err) {
          console.error(err);
          container.innerHTML = `<p class="error">⚠️ Error loading routine for Class ${className}</p>`;
        }
      });
    });
  </script>
</body>

</html>